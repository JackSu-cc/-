### SQL基础

1.数据库三大范式：

​       1：表必须有主键，2：表之间关联必须是主外键的关联，3：字段不能冗余

2.表约束是什么，都有哪些约束：

​     表约束就是对表中字段的约束，比如：主键约束、索引约束

3.索引：

​    索引是一种特殊查询表，为了更加快捷的查询数据，提升查询速度，索引会影响表的写入速度。

​    索引有两种：

​    聚集索引：比如主键ID，就是聚集索引，聚集索引是物理上的连贯索引

​    非聚集索引：聚集索引是逻辑上的连贯索引

4. 事务：

   保证逻辑数据的一致性，与原子性

5. 锁：

   针对多用户，访问数据的先后顺序的一种机制

   - 更新丢失：多个用户同时对一个数据资源进行更新，必定会产生被覆盖的数据，造成数据读写异常。
   - 不可重复读：如果一个用户在一个事务中多次读取一条数据，而另外一个用户则同时更新啦这条数据，造成第一个用户多次读取数据不一致。
   - 脏读：第一个事务读取第二个事务正在更新的数据表，如果第二个事务还没有更新完成，那么第一个事务读取的数据将是一半为更新过的，一半还没更新过的数据，这样的数据毫无意义。
   - 幻读：第一个事务读取一个结果集后，第二个事务，对这个结果集经行增删操作，然而第一个事务中再次对这个结果集进行查询时，数据发现丢失或新增。

减少死锁的方法：

1. 按照同一顺序访问数据库资源，上述例子就不会发生死锁啦
2. 保持是事务的简短，尽量不要让一个事务处理过于复杂的读写操作。事务过于复杂，占用资源会增多，处理时间增长，容易与其它事务冲突，提升死锁概率。
3. 尽量不要在事务中要求用户响应，比如修改新增数据之后在完成整个事务的提交，这样延长事务占用资源的时间，也会提升死锁概率。
4. 尽量减少数据库的并发量。
5. 尽可能使用分区表，分区视图，把数据放置在不同的磁盘和文件组中，分散访问保存在不同分区的数据，减少因为表中放置锁而造成的其它事务长时间等待。
6. 避免占用时间很长并且关系表复杂的数据操作。
7. 使用较低的隔离级别，使用较低的隔离级别比使用较高的隔离级别持有共享锁的时间更短。这样就减少了锁争用。

事务的隔离级别：

- read uncommitted：这个隔离级别最低啦，可以读取到一个事务正在处理的数据，但事务还未提交，这种级别的读取叫做脏读。
- ==read committed：这个级别是默认选项，不能脏读，不能读取事务正在处理没有提交的数据，但能修改。==
- repeatable read：不能读取事务正在处理的数据，也不能修改事务处理数据前的数据。
- snapshot：指定事务在开始的时候，就获得了已经提交数据的快照，因此当前事务只能看到事务开始之前对数据所做的修改。
- serializable：最高事务隔离级别，只能看到事务处理之前的数据。 